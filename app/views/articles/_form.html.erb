<%= simple_form_for @article do |f| %>
  <% if @article.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@article.errors.count, "error") %> prohibited this article from being saved:</h2>
      <ul>
      <% @article.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
	<div class="cold-md-12">
		<fieldset class="fsStyle">				
			<legend class="legendStyle">Basic Case Information, Media <%= image_tag('help_icon.png', data: {:toggle => 'popover', :container => 'body', :trigger => 'hover',:placement => "bottom", :title => "Basic Information and Media", :content => "This fieldset includes the incident date, a photo of the victim or the event as well as a link to a youtube video of the event. Editors should seek out images beyond mug shots where possible. Likewise, our preference is for videos of the actual events as recorded as they occurred vs news reports or other secondary sources, though we have included secondary sources in a few cases."})%></legend>
			<div>
				<%= f.input :date, as: :date_picker, :label => 'Date of Incident', class: "datetimepicker" %>
				<h4>Upload a photo of the victim:</h4>
				<%= f.file_field :avatar %>
				<h4>Add a YouTube Video url relating to the case:</h4>
				<%= f.input :video_url %>
				<h4>Enter a category of abuse:</h4>
				<%= f.collection_select :category_id, Category.all, :id, :name, {prompt: "Choose a Category"} %>
	    </div>
		</fieldset>
	</div>

	<div class="cold-md-12">
		<fieldset class="fsStyle">				
			<legend class="legendStyle">Victims Information <%= image_tag('help_icon.png', data: {:toggle => 'popover', :container => 'body', :trigger => 'hover',:placement => "bottom", :title => "Victim's Information", :content => "This is where you will add information about age, gendar and other characteristics of the victim. Each case requires at least one victim.  "})%></legend>
			<div>
		    <%= f.simple_fields_for :subjects do |subject| %>
		      <%= render 'subject_fields', :f => subject %>
		    <% end %>
	    </div>
	    <div class="links">
	      <%= link_to_add_association 'Add a Victim', f, :subjects, :class => "btn btn-warning" %>
	    </div>
	</fieldset>

	<!-- fieldset collapse start -->
<div class="cold-md-12">
	<fieldset class="fsStyle">				
		<legend class="legendStyle">
      <div data-toggle="collapse">Incident Location Info <%= image_tag('help_icon.png', data: {:toggle => 'popover', :container => 'body', :trigger => 'hover',:placement => "bottom", :title => "Incident Location Info", :content => "These fields relate to where the incident took place. Editors should be as specific as possible, approximating a street address and a zip code. City and State are required fields."})%></div>
		</legend>
		<%= f.input :address %>
		<%= f.input :city %>
		<%= f.collection_select :state_id, State.all, :id, :name, {prompt: "State"}, label:"State" %>
		<%= f.input :zipcode %>
  </fieldset>
</div>

<div class="cold-md-12">
	<fieldset class="fsStyle">				
		<legend class="legendStyle">Main Content Fields <%= image_tag('help_icon.png', data: {:toggle => 'popover', :container => 'body', :trigger => 'hover',:placement => "bottom", :title => "Main Content Fields", :content => "These three fields constitute the body of the case and house most of the facts. The overview contains basic factual information, litigation includes facts relating to legal proceedings and investigation and community action encompasses information about family activity, protests and the like"})%></legend>
		<%= f.input :overview %>
		<%= f.input :litigation %>
		<%= f.input :community_action %>
  </fieldset>
</div>
	<!--
	<%#= f.grouped_collection_select :agency_id, State.order(:name), :agencies, :name, :id, :name, {prompt: "Name of Law Enforcement Agency"}, label:"Agency" %>
	-->
<div class="cold-md-12">
	<fieldset class="fsStyle">				
		<legend class="legendStyle">Milestones <%= image_tag('help_icon.png', data: {:toggle => 'popover', :container => 'body', :trigger => 'hover',:placement => "bottom", :title => "Milestones", :content => "Milestones do not currently appear anywhere on the site, but these events will be the building blocks for timelines and statistics pages we are in the process of putting together"})%></legend>				
		<div id="">
	    <%= f.simple_fields_for :article_milestones do |milestone| %>
	      <%= render 'article_milestone_fields', :f => milestone %>
	    <% end %>
	    <div class="">
	      <%= link_to_add_association 'add a milestone', f, :article_milestones, :class => "btn btn-warning" %>
	    </div>
		</div>
  </fieldset>
</div>

<div class="cold-md-12">
	<fieldset class="fsStyle">				
		<legend class="legendStyle">Links to Related Content <%= image_tag('help_icon.png', data: {:toggle => 'popover', :container => 'body', :trigger => 'hover',:placement => "bottom", :title => "Links", :content => "Links to external content and supporting material are critical. Whenever an editor creates or adds content to a case, he or she should provide at least one supporting link. Any html links included withink the content section should also be added here."})%></legend>
		<div id="links">
		    <%= f.simple_fields_for :links do |link| %>
		      <%= render 'link_fields', :f => link %>
		    <% end %>
	    <div class="links">
	      <%= link_to_add_association 'add a link', f, :links, :class => "btn btn-warning" %>
	    </div>
		</div>
	</fieldset>

	<fieldset class="fsStyle">				
		<legend class="legendStyle">*** Summarize Your Edits for History/Timeline ***</legend>
		<%= f.input :latest_update %>
		<%= f.input :send_update %>
	</fieldset>
  <br>
	<%= f.button :submit, :class => 'btn btn-primary' %>
<% end %>

<script type="text/javascript">
    $('.datetimepicker').datetimepicker();
</script>
